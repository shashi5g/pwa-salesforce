"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[28],{7325:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var a=s(5861),r=s(7294),o=s(5697),n=s.n(o),i=s(49),u=s(6896),d=s(7747),l=s(2338),c=s(9391),m=s(352),p=s(1437),g=s(7536),_=s(6550),h=s(6256),y=s(6269),f=s(9657),E=s(8218),v=s(7624);const A=(0,i.Em)({defaultMessage:[{type:0,value:"Incorrect username or password, please try again."}],id:"login_page.error.incorrect_username_or_password"}),b=()=>{var e;const{formatMessage:t}=(0,u.Z)(),s=(0,m.Z)(),o=(0,g.cI)(),n=(0,_.TH)(),i=(0,h.Z)(),{isRegistered:b,customerType:k}=(0,c.useCustomerType)(),w=(0,c.useAuthHelper)(c.AuthHelpers.LoginRegisteredUserB2C),B=(0,c.useCustomerId)(),C=(0,E.D)(k),{data:D}=(0,c.useCustomerBaskets)({parameters:{customerId:B}},{enabled:!!B&&!v.sk,keepPreviousData:!0}),T=(0,c.useShopperBasketsMutation)("mergeBasket");return(0,r.useEffect)((()=>{var e;b&&(null!=n&&null!==(e=n.state)&&void 0!==e&&e.directedFrom?s(n.state.directedFrom):s("/account"))}),[b]),(0,r.useEffect)((()=>{i.sendViewPage(n.pathname)}),[]),r.createElement(d.xu,{"data-testid":"login-page",bg:"gray.50",py:[8,16]},r.createElement(p.Z,{title:"Sign in",description:"Customer sign in"}),r.createElement(l.W,{paddingTop:16,width:["100%","407px"],bg:"white",paddingBottom:14,marginTop:8,marginBottom:8,borderRadius:"base"},r.createElement(y.Z,{form:o,submitForm:function(s){return(e=e||(0,a.Z)((function*(e){try{var s,a,r;yield w.mutateAsync({username:e.email,password:e.password});(null==D||null===(s=D.baskets)||void 0===s||null===(a=s[0])||void 0===a||null===(r=a.productItems)||void 0===r?void 0:r.length)>0&&"guest"===C&&T.mutate({headers:{"Content-Type":"application/json"},parameters:{createDestinationBasket:!0}})}catch(e){const s=/Unauthorized/i.test(e.message)?t(A):t(f.oj);o.setError("global",{type:"manual",message:s})}}))).apply(this,arguments)},clickCreateAccount:()=>s("/registration"),clickForgotPassword:()=>s("/reset-password")})))};b.getTemplateName=()=>"login",b.propTypes={match:n().object};const k=b}}]);